type Event @entity {
  id: ID!
  version: Version!
  fund: Fund
  name: String!
  contract: String!
  hash: String!
  from: String!
  timestamp: BigInt!
  block: BigInt!
}

type Version @entity {
  id: ID!
  funds: [Fund!]! @derivedFrom(field: "version")
  events: [Event!]! @derivedFrom(field: "version")
  assets: [Asset!]!
}

type Fund @entity {
  id: ID!
  name: String!
  version: Version!
  active: Boolean!
  manager: Account!
  events: [Event!]! @derivedFrom(field: "fund")
  participations: [Participation!]! @derivedFrom(field: "fund")
}

type InvestmentRequest @entity {
  id: ID!
}

type InvestmentExecution @entity {
  id: ID!
}

type Investment @entity {
  id: ID!
  fund: Fund!
  investor: Account!
  request: InvestmentRequest!
  execution: InvestmentExecution
  participation: Participation!
}

type Participation @entity {
  id: ID!
  fund: Fund!
  investor: Account!
  investments: [Investment!]! @derivedFrom(field: "participation")
  shares: BigInt!
}

type Account @entity {
  id: ID!
  manager: Boolean!
  managements: [Fund!]! @derivedFrom(field: "manager")
  participator: Boolean!
  participations: [Participation!]! @derivedFrom(field: "investor")
}

type Asset @entity {
  id: ID!
  name: String!
  symbol: String!
  decimals: Int!
}
